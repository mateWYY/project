/**
 * Created by Administrator on 2017/10/11.
 */
// let data= [
//         {
//             "id": "1",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一',
//             'caozuo':'编辑'
//         }, {
//         "id": "2",
//         "name": "多少积分",
//         "telephone": "18354047846",
//         "products": "金融借贷一",
//         "bank": "6222020903006429367",
//         "idnumber": "231004198556880318",
//         "others1": "金融借贷一",
//         "others2": "金融借贷一",
//         "others3": '金融借贷一',
//         'caozuo':'编辑'
//         },{
//             "id": "3",
//             "name": "sdds",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一',
//             'caozuo':'编辑'
//         },{
//             "id": "4",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//             "id": "5",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//             "id": "6",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//             "id": "7",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//             "id": "8",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//             "id": "9",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//             "id": "10",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//             "id": "11",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//             "id": "12",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//             "id": "13",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一'
//             ,'caozuo':'编辑'
//         },{
//             "id": "14",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一'
//             ,'caozuo':'编辑'
//         },{
//             "id": "15",
//             "name": "哇上级",
//             "telephone": "18354047846",
//             "products": "金融借贷一",
//             "bank": "6222020903006429367",
//             "idnumber": "231004198556880318",
//             "others1": "金融借贷一",
//             "others2": "金融借贷一",
//             "others3": '金融借贷一','caozuo':'编辑'
//         },{
//         "id": "16",
//         "name": "哇上级",
//         "telephone": "18354047846",
//         "products": "金融借贷一",
//         "bank": "6222020903006429367",
//         "idnumber": "231004198556880318",
//         "others1": "金融借贷一",
//         "others2": "金融借贷一",
//         "others3": '金融借贷一','caozuo':'编辑'
//         }
//     ];
let zgJilu=document.getElementsByClassName('zg-jilu')[0];//总共记录
let dqYeshu=document.getElementsByClassName('dq-yeshu')[0];//当前页
let zgYeshu=document.getElementsByClassName('zg-yeshu')[0];//总共页数
let paginationA=document.getElementsByClassName('paginationA')[0];//当前框
let btn=document.getElementsByClassName('btn')[0];//前往
let paginationAAA=document.getElementsByClassName('paginationAAA')[0];//按钮之前元素
let pagination1=document.getElementsByClassName('pagination1')[0];//父元素
let num=15;//设置显示多少数据  目前显示15条
let tabody=document.getElementsByClassName('tabody')[0];

//总记录
zgJilu.innerHTML=data.length;
//总页数
zgYeshu.innerHTML=Math.ceil(data.length/num);
//按钮框
for(let i=0;i<Math.ceil(data.length/num);i++){
    if(i==0){
        let li=document.createElement('li');
        let span=document.createElement('span');
        span.innerHTML=i+1;
        li.appendChild(span);
        li.classList.add('active','active1');
        pagination1.insertBefore(li,paginationAAA.previousSbiling);
    }else{
        let li=document.createElement('li');
        let a=document.createElement('a');
        a.innerHTML=i+1;
        li.appendChild(a);
        li.classList.add('active','active1');
        pagination1.insertBefore(li,paginationAAA.previousSbiling);
    }
}
//遍历内容
function bianli(data,nun) {
    try{
        data.forEach(function (obj, inedx) {
            if(obj.id==nun*num+1){
                foreach.break=new Error("StopIteration");
            }else{
                let newtr=document.createElement('tr');
                [...Object.keys(obj)].forEach(function (e,i) {
                    let newtd=document.createElement('td');
                    newtd.innerHTML=obj[e];
                    newtr.appendChild(newtd);
                },false);
                tabody.appendChild(newtr);
            }

        },false);
    }catch (e){
        if(e.message==="foreach is not defined") {


        }else throw e;
    }
}
bianli(data,1);
//按钮点击事件
let active1=document.getElementsByClassName('active1');
let pagination=document.getElementsByClassName('pagination1')[0];
pagination.addEventListener('click',function (e) {
    if(e.target.tagName=='A'||e.target.tagName=='SPAN') {
        [...active1].forEach(function (obj, index) {
            obj.children[0].style.background='#fff';
            obj.children[0].style.color='#000';
            obj.children[0].style.border='1px solid #C9C9C9'
        },false);
        let arr=[];
        let dq=e.target.innerHTML;//当前页数
        for (let i=(dq-1)*num;i<data.length;i++){
            arr.push(data[i])
        }
        tabody.innerHTML='';
        dqYeshu.innerHTML=dq;
        bianli(arr,dq);
        e.target.style.background='#00B7EE';
        e.target.style.border='1px solid #00B7EE';
        e.target.style.color='#fff';
        arr=[];
    }
});
//前进
btn.onclick=function () {
    let dq=paginationA.value;
    [...active1].forEach(function (obj, index) {
        obj.children[0].style.background='#fff';
        obj.children[0].style.color='#000';
        obj.children[0].style.border='1px solid #C9C9C9'
    },false);
    let arr=[];
    for (let i=(dq-1)*num;i<data.length;i++){
        arr.push(data[i])
    }
    tabody.innerHTML='';
    dqYeshu.innerHTML=dq;
    bianli(arr,dq);
    active1[paginationA.value-1].children[0].style.background='#00B7EE';
    active1[paginationA.value-1].children[0].style.border='1px solid #00B7EE';
    active1[paginationA.value-1].children[0].style.color='#fff';
    arr=[];
};
//时间控件
function fp_ready(){
    document.getElementById("flatpickr-tryme").flatpickr();
    document.getElementById("flatpickr").flatpickr();
    document.getElementsByClassName("calendar").flatpickr();
}